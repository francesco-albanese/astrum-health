{"version":3,"sources":["sendmail.es6"],"names":["sendMail","cacheDom","contactUsForm","$","submitButton","find","name","surname","email","message","validateForm","formBody","formValid","validateEmail","re","test","each","key","field","length","addClass","removeClass","bindEvents","on","postFormToPHP","bind","event","preventDefault","body","val","success","emailClass","emailResponseText","emailResponse","ajax","type","url","data","cache","done","response","append","trigger","setTimeout","remove","fail","error","responseText","init"],"mappings":"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","file":"sendmail.js","sourcesContent":["'use strict';\n\n(() => {\n    const sendMail = {\n        cacheDom() {\n            this.contactUsForm = $('#contact-us form');\n            this.submitButton = this.contactUsForm.find('.btn--submit');\n            this.name = this.contactUsForm.find('#name');\n            this.surname = this.contactUsForm.find('#surname');\n            this.email = this.contactUsForm.find('#email');\n            this.message = this.contactUsForm.find('#message');\n        },\n\n        validateForm(formBody) {\n            let formValid = false;\n            function validateEmail(email) {\n                var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n                return re.test(email);\n            }\n\n            $.each(formBody, (key, field) => {\n                if (key !== \"surname\") {\n                    if (!field.length) {\n                        $(sendMail[key]).addClass('form-error');\n                        formValid = false;\n                    } else {\n                        $(sendMail[key]).removeClass('form-error');\n                        formValid = true;\n                    }\n                }\n                if (key === \"email\") {\n                    if (field.length && !validateEmail(field)) {\n                        $(sendMail[key]).addClass('form-error');\n                        formValid = false;\n                    }\n                }\n            });\n            return formValid;\n        },\n\n        bindEvents() {\n            this.submitButton.on('click', this.postFormToPHP.bind(this));\n        },\n\n        postFormToPHP(event) {\n            event.preventDefault();\n            const body = {\n                name: this.name.val(),\n                surname: this.surname.val(),\n                email: this.email.val(),\n                message: this.message.val()\n            };\n\n            const formValid = this.validateForm(body);\n\n            if (!formValid) {\n                return;\n            }\n\n            let success = false;\n            let emailClass = success\n                ? \"success\"\n                : \"error\";\n            let emailResponseText = \"\";\n            let emailResponse = ``;\n            $.ajax({type: \"POST\", url: \"./mail/mail.php\", data: body, cache: false})\n            .done(function (response) {\n                success = true;\n                emailResponseText = response;\n                emailResponse = `<div class=\"email-outcome email-${emailClass}\">${emailResponseText}</div>`;\n                if (!$('.email-outcome').length) {\n                    sendMail.contactUsForm.append(emailResponse);\n                }\n                sendMail.contactUsForm.trigger('reset');\n                setTimeout(() => {\n                    $('.email-outcome').remove();\n                }, 5000);\n            })\n            .fail(function (error) {\n                success = false;\n                emailResponseText = error.responseText;\n                emailResponse = `<div class=\"email-outcome email-${emailClass}\">${emailResponseText}</div>`;\n                if (!$('.email-outcome').length) {\n                    sendMail.contactUsForm.append(emailResponse);\n                }\n                setTimeout(() => {\n                    $('.email-outcome').remove();\n                }, 5000);\n            });\n        },\n\n        init() {\n            this.cacheDom();\n            this.bindEvents();\n        }\n    };\n\n    return sendMail.init();\n})();"]}