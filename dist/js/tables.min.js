"use strict";!function(){function checkStatus(response){if(response.status>=200&&response.status<300)return response;var error=new Error(response.statusText);throw error.response=response,error}function parseJSON(response){return response.json()}var production=!1,jsonPath=production?"/js/table-data.json":"/js/es6/table-data.json";fetch(jsonPath).then(checkStatus).then(parseJSON).then(function(data){return dynamicTable.init(data)})["catch"](function(error){console.log("request failed",error)});var dynamicTable={cacheDom:function(){this.$tableContainer=$(".table-container"),this.$tabActive=$('.tab__title[data-tab="1"]')},createTableRow:function(){var $tableRow=$("<div />").addClass("table-row");return dynamicTable.$tableContainer.append($tableRow),$tableRow},createTableCell:function(){var $tableCell=$("<div />").addClass("table-cell");return this.$tableRow.append($tableCell),$tableCell},generateRowTitles:function(rowTitles){var $tableRow=this.createTableRow();this.$tableRowTitles=$tableRow,rowTitles.forEach(function(titleObj,index){var $tableHeader=$("<div />").addClass("table-header table-cell").addClass("table-col"+(index+1));$tableHeader.text(titleObj.title),$tableRow.append($tableHeader)})},generateRowData:function(rowData){var _this=this;rowData.forEach(function(tableRow){var $tableRows=_this.createTableRow();_this.generateTableCells($tableRows,tableRow)})},generateTableCells:function(tableRow,tableRowObj){var _this2=this;this.$tableRow=tableRow,tableRowObj.rows.forEach(function(row,index){var $tableCell=[_this2.createTableCell()];$tableCell.forEach(function(cell){_this2.generateTableCellContent(row,cell),_this2.assignClasses(row,cell,index+1)})})},generateTableCellContent:function(row,tableCell){var content="";row.isEmptyCell?content+="-":row.isTicked?content+="<i class='fa fa-dot-circle-o'></i>":content=row.content,tableCell.html(content)},assignClasses:function(row,tableCell,index){var cssClass="";row.isTitle?cssClass+="table-cell-title":row.isUnitMeasure?cssClass+="table-cell-unit-measure":row.isNotApplicable&&(cssClass+="table-cell-not-applicable"),tableCell.addClass(cssClass).addClass("table-col"+index)},tableHeadersFixed:function(tableRow){var tableRowCloned=tableRow.clone().insertAfter(tableRow),$tabContent=($(".table-container").position().left,$(".tab__content.overflow-auto"));tableRowCloned.addClass("table-row-cloned"),tableRowCloned.css("top",$(".header--fixed-top").outerHeight()),$(window).on("scroll",function(){var scrollTop=$(window).scrollTop(),tableRowOffset=tableRow.offset().top-tableRow.outerHeight();scrollTop>=tableRowOffset?(tableRowCloned.addClass("visible"),$(".table-row-cloned.visible").css("left",Math.round($tabContent.position().left)+-$tabContent.scrollLeft())):tableRowCloned.removeClass("visible")}),$tabContent.on("scroll",function(){$(".table-row-cloned.visible").css("left",Math.round($(this).position().left)+-$(this).scrollLeft())})},bindEvents:function(){var _this3=this;this.$tabActive.on("click",function(){_this3.tableHeadersFixed(_this3.$tableRowTitles)}),$(".table-cell").hover(function(){$(this).parent().addClass("highlight");var index=$(this).index()+1;$(".table-col"+index).addClass("highlight")},function(){$(this).parent().removeClass("highlight");var index=$(this).index()+1;$(".table-col"+index).removeClass("highlight")})},init:function(data){this.cacheDom(),this.generateRowTitles(data.rowTitles),this.generateRowData(data.rowData),this.bindEvents()}}}();